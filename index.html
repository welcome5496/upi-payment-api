<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPI Payment via QR & UPI Apps</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>

    <h2>Enter Amount to Pay</h2>
    <input type="number" id="amount" placeholder="Enter Amount" min="1" required>
    <button onclick="generatePayment()">Generate QR & Pay</button>

    <h3>Scan to Pay via UPI</h3>
    <div id="qrcode"></div>

    <h3>Or Pay Using Your UPI App</h3>
    <button id="payNow" style="display: none;" onclick="openUPIApp()">Pay Now</button>

    <script>
        let upiID = "hostingmaster@ybl";
        let merchantName = "Shivam";
        let currency = "INR";

        function generatePayment() {
            let amount = document.getElementById("amount").value;
            if (!amount || amount <= 0) {
                alert("Please enter a valid amount");
                return;
            }

            let transactionID = "TXN" + Math.floor(Math.random() * 1000000);
            let upiPaymentLink = `upi://pay?pa=${upiID}&pn=${merchantName}&am=${amount}&cu=${currency}&tid=${transactionID}`;

            document.getElementById("qrcode").innerHTML = "";
            new QRCode(document.getElementById("qrcode"), {
                text: upiPaymentLink,
                width: 200,
                height: 200
            });

            document.getElementById("payNow").style.display = "block";
            document.getElementById("payNow").setAttribute("onclick", `openUPIApp('${upiPaymentLink}')`);
        }

        function openUPIApp(upiPaymentLink) {
            window.location.href = upiPaymentLink;
        }
    </script>

</body>
</html>
